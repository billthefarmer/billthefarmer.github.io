var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(h){var n=0;return function(){return n<h.length?{done:!1,value:h[n++]}:{done:!0}}};$jscomp.arrayIterator=function(h){return{next:$jscomp.arrayIteratorImpl(h)}};$jscomp.makeIterator=function(h){var n="undefined"!=typeof Symbol&&Symbol.iterator&&h[Symbol.iterator];return n?n.call(h):$jscomp.arrayIterator(h)};
jQuery(document).ready(function(h){function n(a){var e=window.location.search.substring(1).split("&");e=$jscomp.makeIterator(e);for(var c=e.next();!c.done;c=e.next())if(c=c.value.split("="),c[0]==a)return c[1]}function G(a){h(a).append("<div><br /></div>")}function H(a,e,c){var d=a.desc,g=a[e].type,f=a[e].text;a=a[e].image;h(c).append("<img src='"+baseURL+a+"'>");h(c).append("<p>"+d+"</p>");h(c).append("<p style='font-weight: bold;'>"+g+"</p>");f=f.replace(/\n\n/g,"</p><p>");h(c).append("<p>"+f+"</p>")}
function p(a,e,c){var d=a.size,g=a.type,f=a.color,z=a.link,m="";if(d||g||f)m=" style='",d&&"normal"!=g&&(m+="font-size: "+d+"px;"),g&&(m+="font-weight: "+g+";"),f&&(m=Array.isArray(a.color)?m+("color: rgb("+f[0]+","+f[1]+","+f[2]+");"):m+("color: rgb("+f+","+f+","+f+");")),m+="'";a=a.text;a.match(/~[a-z]+~/)&&(a=a.replace(/~forename~/g,A).replace(/~lastname~/g,B));a.match(/\n/)&&(a=a.replace(/\n\n/g,"</p><p>").replace(/^\n/,"").replace(/\n$/,""));a=c?a.replace(/\n/g," "):a.replace(/\n/g,"<br />");
z?h(e).append("<p><a href='"+z+"'"+m+">"+a+"</a></p>"):h(e).append("<div"+m+"><p>"+a+"</p></div>")}function w(a,e){var c=a.x,d=a.width,g=a.link,f="";if(c||d)f=" style='",d&&(f+="width: "+d+"px;"),c&&0>c&&(f+="float: right; margin-left: 10px;"),f+="'";g?h(e).append("<a href='"+g+"'><img src='"+baseURL+a.src+"'"+f+"></a>"):h(e).append("<img src='"+baseURL+a.src+"'"+f+">")}function I(a,e,c){var d=a.desc,g=a[e].type,f=a[e].text;N(a[e].image,"png",k,u,36,c,523);c=J(d,k,36,c+92,523)+k.getLineHeight();k.setFont("helvetica",
"bold");c=J(g,k,36,c,523)+k.getLineHeight();k.setFont("helvetica","normal");return J(f,k,36,c,523)}function O(a,e,c){var d=a.size;d&&e.setFontSize(d);(d=a.type)&&e.setFont("helvetica",d);(d=a.color)&&(Array.isArray(d)?e.setTextColor(d[0],d[1],d[2]):e.setTextColor(d));c=a.y?a.y:c;d=(d=a.width)?d:523;var g=a.text;g.match(/~[a-z]+~/)&&(g=g.replace(/~forename~/g,A).replace(/~lastname~/g,B));return J(g,e,36,c,d,a.link)}function P(a,e,c){var d=a.y,g=a.x,f=a.width;N(a.src,a.type,e,c,g?0>g?-559:g:36,d?0>
d?-806:d:36,f?f:523,a.height,a.link)}function J(a,e,c,d,g,f){g=e.splitTextToSize(a,g);f?e.textWithLink(a,c,d,{url:f}):e.text(g,c,d);return d+g.length*e.getLineHeight()}function N(a,e,c,d,g,f,z,m,Q,S){var C=new Image;C.src=baseURL+a;C.addEventListener("load",function(D){D=document.createElement("canvas");D.width=C.width;D.height=C.height;D.getContext("2d").drawImage(C,0,0);D=D.toDataURL("image/"+e);m=m?m:z*C.height/C.width;g=0>g?-g-z:g;f=0>f?-f-m:f;c.setPage(d);c.addImage(D,e,g,f,z,m);Q&&c.link(g,
f,z,m,{url:Q})})}var l=window.jspdf.jsPDF;n("A");var E=n("B"),q=n("C"),R=n("D"),K=n("E"),L=n("F");n("S");var A=n("forename"),B=n("lastname");void 0==A&&(A="Cat");void 0==B&&(B="LeBlanc");A=A.replace("+"," ");B=B.replace("+"," ");var b=A+" "+B,v=data.pages,r=data.answers,M=data.penult,F=data.last;h("#report").button();h("#name").html(b);var x=$jscomp.makeIterator(v);for(b=x.next();!b.done;b=x.next()){var t=b.value;switch(t.pageno){case 1:w(t.images[0],"#preview");var y=$jscomp.makeIterator(t.text);
for(b=y.next();!b.done;b=y.next())p(b.value,"#preview");w(t.images[1],"#preview");G("#preview");break;case 2:w(t.images[0],"#preview");y=$jscomp.makeIterator(t.text);for(b=y.next();!b.done;b=y.next())p(b.value,"#preview",!0);w(t.images[1],"#preview");G("#preview");break;case 3:w(t.images[0],"#preview");y=$jscomp.makeIterator(t.text);for(b=y.next();!b.done;b=y.next())p(b.value,"#preview");w(t.images[1],"#preview");G("#preview")}}E&&H(r.B,E,"#preview");q&&H(r.C,q,"#preview");H(r.D,R,"#preview");K&&
H(r.E,K,"#preview");L&&H(r.F,L,"#preview");G("#preview");p(M.text[0],"#preview");w(M.images[0],"#preview");p(M.text[1],"#preview");G("#preview");p(F.text[0],"#preview");p(F.text[1],"#preview");p(F.text[2],"#preview");p(F.text[3],"#preview");w(F.images[0],"#preview");p(F.text[4],"#preview");var k=l({unit:"pt",compress:!0}),u=1;l=$jscomp.makeIterator(v);for(b=l.next();!b.done;b=l.next()){v=b.value;u=v.pageno;1!=u&&k.addPage();x=$jscomp.makeIterator(v.images);for(b=x.next();!b.done;b=x.next())P(b.value,
k,u);x=36;v=$jscomp.makeIterator(v.text);for(b=v.next();!b.done;b=v.next())x=O(b.value,k,x)}k.addPage();l=36;u++;E&&(l=I(r.B,E,l));q&&(l=I(r.C,q,l));k.addPage();u++;l=I(r.D,R,36);K&&(l=I(r.E,K,l));k.addPage();l=36;u++;L&&(l=I(r.F,L,l));E=$jscomp.makeIterator([M,F]);for(b=E.next();!b.done;b=E.next()){page=b.value;k.addPage();l=36;u++;q=$jscomp.makeIterator(page.images);for(b=q.next();!b.done;b=q.next())P(b.value,k,u);q=$jscomp.makeIterator(page.text);for(b=q.next();!b.done;b=q.next())l=O(b.value,k,
l)}h("#report").click(function(){k.save("report.pdf")})});
