<!DOCTYPE html>
<html lang="en">
  <head><script src="/blog/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=blog/livereload" data-no-instant defer></script>

    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->

<meta property="og:url" content="http://localhost:1313/blog/categories/hacking/">
  <meta property="og:site_name" content="Bill Farmer">
  <meta property="og:title" content="Hacking">
  <meta property="og:description" content="Random thoughts on random subjects">
  <meta property="og:locale" content="en_gb">
  <meta property="og:type" content="website">


  <meta itemprop="name" content="Hacking">
  <meta itemprop="description" content="Random thoughts on random subjects">
  <meta itemprop="datePublished" content="2024-02-06T08:37:04+00:00">
  <meta itemprop="dateModified" content="2024-02-06T08:37:04+00:00">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Hacking">
  <meta name="twitter:description" content="Random thoughts on random subjects">






<meta name="generator" content="Hugo 0.141.0">


    <base href="http://localhost:1313/blog/">
    <link rel="canonical" href="http://localhost:1313/blog/categories/hacking/">
    <title>Bill Farmer</title>

    <!-- CSS -->
    <link href="http://localhost:1313/blog/css/app.css" rel="stylesheet">
    
    <!-- RSS 2.0 feed -->
      <link rel="alternate" type="application/rss+xml" href="http://localhost:1313/blog/categories/hacking/index.xml" title="Bill Farmer" />
    

    

<style>
.callout.large {
    background-image: url(http://localhost:1313/blog/images/2013/12/cropped-P1010089.jpg);
    background-size: cover;
    background-position: center center;
    background-repeat: no-repeat;
}
.callout.large a, .callout.large p {
    color: white;
}
pre {
    margin-top: 16px;
    margin-bottom: 16px;
}
code {
    padding: 0;
    border: 0;
    background-color: #fff;
    font-family: Consolas, "Liberation Mono", Courier, monospace;
    font-weight: normal;
    color: #0a0a0a;
}
table {
    width: auto !important;
}
</style>




  </head>
  <body>

    <header class="nav">
      <div class="top-bar">
        <div class="row column">
          <div class="top-bar-left">
            <ul class="menu">
              <li class=""><a href="http://localhost:1313/blog/">
                Home
              </a></li>
              
                
                  <li><a href="http://localhost:1313/blog/morris/">
                    Morris
                  </a></li>
                
                  <li><a href="http://localhost:1313/blog/categories/">
                    Categories
                  </a></li>
                
                  <li><a href="http://localhost:1313/blog/categories/travel/">
                    Travel
                  </a></li>
                
                  <li><a href="http://localhost:1313/blog/categories/hacking/">
                    Hacking
                  </a></li>
                
                  <li><a href="http://localhost:1313/blog/categories/recipes/">
                    Recipes
                  </a></li>
                
                  <li><a href="http://localhost:1313/blog/categories/diy/">
                    DIY
                  </a></li>
                
                  <li><a href="http://localhost:1313/blog/categories/electronics/">
                    Electronics
                  </a></li>
                
                  <li><a href="http://localhost:1313/blog/index/">
                    Index
                  </a></li>
                
                  <li><a href="http://localhost:1313/blog/morris-o-meter/">
                    Morris-o-meter
                  </a></li>
                
                  <li><a href="http://localhost:1313/blog/about/">
                    About
                  </a></li>
                
                  <li><a href="http://localhost:1313/blog/test-o-meter/">
                    Test-o-meter
                  </a></li>
                
              
            </ul>
          </div>
        </div>
      </div>
    </header>

    <header class="blog-header">
      <div class="callout large">
        <div class="row column text-center">
          <h1>
            <a href="http://localhost:1313/blog/" rel="home">Bill Farmer</a>
          </h1>
          
            <p>
              Random thoughts on random subjects
            </p>
          
        </div>
      </div>
    </header>

    <main>
      <div class="row" id="content">
        <div class="medium-8 columns">
          







  

<div class="blog-post">
  <h3>
    <a href="http://localhost:1313/blog/post/handling-resizing-in-windows/">Handling Resizing in Windows</a>
  </h3>
  <div class="callout small">
    <small>
      <time datetime="2018-06-19T20:23:44&#43;01:00">
        Tue Jun 19, 2018
      </time> by Bill Farmer.
      Categories: 
  
    
      <a href="/categories/hacking">
        Hacking
      </a>
  

.
      
    </small>
  </div>
  <p>
    <p>I have a windows app where I want the app window to maintain it&rsquo;s
aspect ratio when it is resized. Windows provides two mechanisms for
this, the <a href="https://msdn.microsoft.com/en-us/library/windows/desktop/ms632646(v=vs.85).aspx"><code>WM_SIZE</code></a> message and the <a href="https://msdn.microsoft.com/en-us/library/windows/desktop/ms632647(v=vs.85).aspx"><code>WM_SIZING</code></a> message. The
<code>WM_SIZE</code> message is sent when a window has been resized to allow
child windows to be resized, the <code>WM_SIZING</code> message is sent while the
user is resizing it to allow the size to be adjusted. The messages are
handled in the <a href="https://msdn.microsoft.com/en-us/library/windows/desktop/ms633573(v=vs.85).aspx"><code>WindowProc</code></a> callback function.</p>
  </p>
  <a href='http://localhost:1313/blog/post/handling-resizing-in-windows/'>Read more →</a>
  <hr>
</div>


  

<div class="blog-post">
  <h3>
    <a href="http://localhost:1313/blog/swift/">Swift</a>
  </h3>
  <div class="callout small">
    <small>
      <time datetime="2018-03-28T15:56:14Z">
        Wed Mar 28, 2018
      </time> by Bill Farmer.
      Categories: 
  
    
      <a href="/categories/hacking">
        Hacking
      </a>
  

.
      
    </small>
  </div>
  <p>
    <p>Some years ago I wrote an OSX app in C using <a href="https://en.wikipedia.org/wiki/Carbon_(API)">Carbon</a> because my
Hackintosh would only run <a href="https://en.wikipedia.org/wiki/Mac_OS_X_Tiger">OSX 10.4 (Tiger)</a>. The most difficult
part was dealing with the <a href="https://developer.apple.com/documentation/coreaudio">Core Audio</a> API.</p>
<p>I recently decided to port it to <a href="https://developer.apple.com/swift">Swift</a> to avoid having to attempt
to learn Objective C. A derivation of C that sends selectors to
targets using the syntax <code>[target selector arguments...]</code> I don&rsquo;t want
to know about.</p>
<h3 id="core-audio">Core Audio</h3>
<p>Having translated the Core Audio part of the app to Swift, I
discovered that part of it refused to work. The same code originally
written in C works fine.</p>
  </p>
  <a href='http://localhost:1313/blog/swift/'>Read more →</a>
  <hr>
</div>


  

<div class="blog-post">
  <h3>
    <a href="http://localhost:1313/blog/android-custom-attributes/">Android Custom Attributes</a>
  </h3>
  <div class="callout small">
    <small>
      <time datetime="2018-01-08T11:02:04Z">
        Mon Jan 8, 2018
      </time> by Bill Farmer.
      Categories: 
  
    
      <a href="/categories/hacking">
        Hacking
      </a>
  

.
      
    </small>
  </div>
  <p>
    <p>I had resisted adding a dark theme to my <a href="https://github.com/billthefarmer/diary">Diary</a> app until now
because it uses a <a href="https://github.com/billthefarmer/CustomCalendarView">custom calendar</a> with built in customisable
styles and preferences with icons. So I had to work out how to make
the custom styles of the calendar revert to styles from the current
theme, and how to switch icons for the preferences according to the
theme.</p>
<h3 id="calendar-custom-styles">Calendar custom styles</h3>
<p>The custom calendar has a list of styles that are customisable in a
<code>attrs.xml</code> file.</p>
  </p>
  <a href='http://localhost:1313/blog/android-custom-attributes/'>Read more →</a>
  <hr>
</div>


  

<div class="blog-post">
  <h3>
    <a href="http://localhost:1313/blog/android-recent-files/">Android Recent Files</a>
  </h3>
  <div class="callout small">
    <small>
      <time datetime="2017-12-15T11:53:57Z">
        Fri Dec 15, 2017
      </time> by Bill Farmer.
      Categories: 
  
    
      <a href="/categories/hacking">
        Hacking
      </a>
  

.
      
    </small>
  </div>
  <p>
    <p>There are several parts to this - creating the list of files, saving
the list in the preferences, restoring the list on startup and
creating the list in the menu.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#080;font-style:italic">// onCreate</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#a2f">@Override</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#a2f;font-weight:bold">protected</span><span style="color:#bbb"> </span><span style="color:#0b0;font-weight:bold">void</span><span style="color:#bbb"> </span><span style="color:#00a000">onCreate</span>(Bundle<span style="color:#bbb"> </span>savedInstanceState)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#a2f;font-weight:bold">super</span>.<span style="color:#b44">onCreate</span>(savedInstanceState);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>SharedPreferences<span style="color:#bbb"> </span>preferences<span style="color:#bbb"> </span><span style="color:#666">=</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>PreferenceManager.<span style="color:#b44">getDefaultSharedPreferences</span>(<span style="color:#a2f;font-weight:bold">this</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#080;font-style:italic">// Create a map of scroll positions by file name</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>Set<span style="color:#666">&lt;</span>String<span style="color:#666">&gt;</span><span style="color:#bbb"> </span>pathSet<span style="color:#bbb"> </span><span style="color:#666">=</span><span style="color:#bbb"> </span>preferences.<span style="color:#b44">getStringSet</span>(PREF_PATHS,<span style="color:#bbb"> </span><span style="color:#a2f;font-weight:bold">null</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>pathMap<span style="color:#bbb"> </span><span style="color:#666">=</span><span style="color:#bbb"> </span><span style="color:#a2f;font-weight:bold">new</span><span style="color:#bbb"> </span>HashMap<span style="color:#666">&lt;</span>String,<span style="color:#bbb"> </span>Integer<span style="color:#666">&gt;</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#a2f;font-weight:bold">if</span><span style="color:#bbb"> </span>(pathSet<span style="color:#bbb"> </span><span style="color:#666">!=</span><span style="color:#bbb"> </span><span style="color:#a2f;font-weight:bold">null</span>)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#a2f;font-weight:bold">for</span><span style="color:#bbb"> </span>(String<span style="color:#bbb"> </span>path<span style="color:#bbb"> </span>:<span style="color:#bbb"> </span>pathSet)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                </span>pathMap.<span style="color:#b44">put</span>(path,<span style="color:#bbb"> </span>preferences.<span style="color:#b44">getInt</span>(path,<span style="color:#bbb"> </span>0));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>removeList<span style="color:#bbb"> </span><span style="color:#666">=</span><span style="color:#bbb"> </span><span style="color:#a2f;font-weight:bold">new</span><span style="color:#bbb"> </span>ArrayList<span style="color:#666">&lt;</span>String<span style="color:#666">&gt;</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#080;font-style:italic">// ...</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span></code></pre></div><p>The android preference system only allows a list of strings to be
stored as a set, so the last modified date of each file is used below
to order the list. The code also saves the scroll position of each
file using the file name as a key. The remove list is used to remove
old entries.</p>
  </p>
  <a href='http://localhost:1313/blog/android-recent-files/'>Read more →</a>
  <hr>
</div>


  

<div class="blog-post">
  <h3>
    <a href="http://localhost:1313/blog/android-text-search/">Android Text Search</a>
  </h3>
  <div class="callout small">
    <small>
      <time datetime="2017-10-26T11:57:27&#43;01:00">
        Thu Oct 26, 2017
      </time> by Bill Farmer.
      Categories: 
  
    
      <a href="/categories/hacking">
        Hacking
      </a>
  

.
      
    </small>
  </div>
  <p>
    <p>The Android guide for <a href="https://developer.android.com/guide/topics/search/index.html">Search Overview</a> is oriented towards
searching external content rather than text. There is a mention of
<a href="https://developer.android.com/guide/topics/search/search-dialog.html#SearchDialog">Using the Search Dialog</a>. However all the bits you need are
there. To get a search dialog in the toolbar that pops up when needed,
you need a seach item in the menu. It should be the first item, unless
there is a good reason otherwise.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#080">&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">&lt;menu</span>
</span></span><span style="display:flex;"><span>    <span style="color:#b44">xmlns:android=</span><span style="color:#b44">&#34;http://schemas.android.com/apk/res/android&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="">&lt;item</span>
</span></span><span style="display:flex;"><span>      <span style="color:#b44">android:id=</span><span style="color:#b44">&#34;@+id/search&#34;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#b44">android:showAsAction=</span><span style="color:#b44">&#34;ifRoom|collapseActionView&#34;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#b44">android:title=</span><span style="color:#b44">&#34;@string/search&#34;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#b44">android:actionViewClass=</span><span style="color:#b44">&#34;android.widget.SearchView&#34;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#b44">android:icon=</span><span style="color:#b44">&#34;@drawable/ic_action_search&#34;</span> <span style="color:#008000;font-weight:bold">/&gt;</span>
</span></span></code></pre></div><p>The search dialog will still pop up if the search item is in the menu
rather than the toolbar. The dialog pops up and collapses all by
itself in response to user interaction without any developer code. To
implement the search, you need an <a href="https://developer.android.com/reference/android/widget/SearchView.OnQueryTextListener.html">OnQueryTextListener</a>, which is
called by the <a href="https://developer.android.com/reference/android/widget/SearchView.html">SearchView</a>.</p>
  </p>
  <a href='http://localhost:1313/blog/android-text-search/'>Read more →</a>
  <hr>
</div>




  <div>
    
      <a class="button" href="/blog/categories/hacking/page/4/">Previous page</a>
      <a class="button" href="/blog/categories/hacking/page/6/">Next page</a>
    
    
    
    <hr>
  </div>



        </div>
          <div class="medium-3 columns" data-sticky-container>
  <div class="sticky" data-sticky data-anchor="content">

  

  

  <h4>Recent Posts</h4>
  <ul>
    
      <li><a href="/blog/beach-villas/">
        Beach Villas
      </a></li>
    
      <li><a href="/blog/flutter-search-widget/">
        Flutter app bar search widget
      </a></li>
    
      <li><a href="/blog/android-navigation-menu/">
        Android Navigation Menu
      </a></li>
    
      <li><a href="/blog/update-widget/">
        Update App Widget
      </a></li>
    
      <li><a href="/blog/turkey-cabbage-wraps/">
        Turkey Cabbage Wraps
      </a></li>
    
      <li><a href="/blog/create-word-grid/">
        Create a Word Grid
      </a></li>
    
      <li><a href="/blog/read-paywalled-articles/">
        Read Paywalled Newspaper Articles
      </a></li>
    
      <li><a href="/blog/risotto-milanese/">
        Risotto Milanese
      </a></li>
    
      <li><a href="/blog/android-flutter/">
        Android Flutter
      </a></li>
    
      <li><a href="/blog/android-kotlin/">
        Android Kotlin
      </a></li>
    
  </ul>

  
    <h4>Links</h4>
    <ul>
      
        <li><a href="https://github.com/billthefarmer">
          Github
        </a></li>
      
        <li><a href="https://gitlab.com/williamjfarmer">
          Gitlab
        </a></li>
      
        <li><a href="http://billthefarmer.github.io">
          Home
        </a></li>
      
    </ul>
  

  </div>
</div>

      </div>
    </main>

    <footer class="blog-footer">
      <div class="row column">
        <p>
          
          Copyright © 2025 Bill Farmer
          
        </p>
        <p>
          <a href="http://localhost:1313/blog/categories/hacking/#">Back to top</a>
        </p>
      </div>
    </footer>

  <foot>

    <script src="http://localhost:1313/blog/js/app.js"></script>

  </foot>
  </body>
</html>
