<!DOCTYPE html>
<html lang="en">
  <head>

    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->

<meta property="og:title" content="Build Mac OSX apps using command line tools" />
<meta property="og:description" content="You will need to install the Xcode command line tools, you don&#8217;t need the Xcode app. The easiest way to do this is to attempt to build an app like emacs by typing ./configure on the command line. A dialog box will pop up asking if you want to download and install the tools.
Xcode now uses the LLVM CLang compiler and documentation is exceedingly hard to find. You can type gcc -help or clang -help on the command line to get some info." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://billthefarmer.github.io/blog/build-mac-osx-apps-using-command-line-tools/" />



<meta property="article:published_time" content="2016-02-02T17:59:09&#43;00:00"/>
<meta property="article:modified_time" content="2016-02-02T17:59:09&#43;00:00"/>












<meta itemprop="name" content="Build Mac OSX apps using command line tools">
<meta itemprop="description" content="You will need to install the Xcode command line tools, you don&#8217;t need the Xcode app. The easiest way to do this is to attempt to build an app like emacs by typing ./configure on the command line. A dialog box will pop up asking if you want to download and install the tools.
Xcode now uses the LLVM CLang compiler and documentation is exceedingly hard to find. You can type gcc -help or clang -help on the command line to get some info.">


<meta itemprop="dateModified" content="2016-02-02T17:59:09&#43;00:00" />
<meta itemprop="wordCount" content="454">



<meta itemprop="keywords" content="" />

<meta name="twitter:card" content="summary"/><meta name="twitter:title" content="Build Mac OSX apps using command line tools"/>
<meta name="twitter:description" content="You will need to install the Xcode command line tools, you don&#8217;t need the Xcode app. The easiest way to do this is to attempt to build an app like emacs by typing ./configure on the command line. A dialog box will pop up asking if you want to download and install the tools.
Xcode now uses the LLVM CLang compiler and documentation is exceedingly hard to find. You can type gcc -help or clang -help on the command line to get some info."/>






<meta name="generator" content="Hugo 0.26" />


    <base href="http://billthefarmer.github.io/blog">
    <link rel="canonical" href="http://billthefarmer.github.io/blog/build-mac-osx-apps-using-command-line-tools/">
    <title>Build Mac OSX apps using command line tools | Bill Farmer&#39;s Blog</title>

    <!-- CSS -->
    <link href="http://billthefarmer.github.io/blogcss/app.css" rel="stylesheet">

    

    

    
    


  </head>
  <body>

    <header class="nav">
      <div class="top-bar">
        <div class="row column">
          <div class="top-bar-left">
            <ul class="menu">
              <li><a href="http://billthefarmer.github.io/blog">
                  Bill Farmer's Blog
                </a></li>
            </ul>
          </div>
          <div class="top-bar-right">
            <ul class="menu">
              <li class=""><a href="http://billthefarmer.github.io/blog">
                Home
              </a></li>
              
                
                  <li><a href="http://billthefarmer.github.io/blog/">
                    Index
                  </a></li>
                
                  <li><a href="http://billthefarmer.github.io/blog/about/">
                    About
                  </a></li>
                
                  <li><a href="http://billthefarmer.github.io/blog/whatever-o-meter/">
                    Whatever-o-meter
                  </a></li>
                
                  <li><a href="http://billthefarmer.github.io/blog/">
                    Bill Farmer&#39;s Blog
                  </a></li>
                
                  <li><a href="http://billthefarmer.github.io/blog/categories/">
                    Categories
                  </a></li>
                
                  <li><a href="http://billthefarmer.github.io/blog/categories/diy/">
                    Diy
                  </a></li>
                
                  <li><a href="http://billthefarmer.github.io/blog/categories/hacking/">
                    Hacking
                  </a></li>
                
                  <li><a href="http://billthefarmer.github.io/blog/categories/recipes/">
                    Recipes
                  </a></li>
                
              
            </ul>
          </div>
        </div>
      </div>
    </header>

    <header class="blog-header">
      <div class="callout large">
        <div class="row column text-center">
          <h1>
            <a href="http://billthefarmer.github.io/blog" rel="home">Bill Farmer's Blog</a>
          </h1>
          
            <p>
              Random thoughts on random subjects
            </p>
          
        </div>
      </div>
    </header>

    <main>
      <div class="row" id="content">
        <div class="medium-8 columns">
          
  


  <div class="blog-post">
    <h3>
      <a href="http://billthefarmer.github.io/blog/build-mac-osx-apps-using-command-line-tools/">Build Mac OSX apps using command line tools</a>
    </h3>
    <div class="callout small">
      <small>
        <time datetime="2016-02-02T17:59:09Z">
          Tue Feb 2, 2016
        </time> by Bill Farmer.
        Categories: 
  
    
      <a href="/blog/categories/hacking">
        Hacking
      </a>
  

.
        
        <br>
        
      </small>
    </div>
    <p>
      <p>You will need to install the Xcode command line tools, you don&#8217;t need the Xcode app. The easiest way to do this is to attempt to build an app like emacs by typing <code>./configure</code> on the command line. A dialog box will pop up asking if you want to download and install the tools.</p>

<p>Xcode now uses the LLVM CLang compiler and documentation is exceedingly hard to find. You can type <code>gcc -help</code> or <code>clang -help</code> on the command line to get some info. I found two web pages with more useful info: <a href="http://clang.llvm.org/docs/CommandGuide/clang.html" target="_blank"><a href="http://clang.llvm.org/docs/CommandGuide/clang.html">http://clang.llvm.org/docs/CommandGuide/clang.html</a></a> and <a href="https://developer.apple.com/library/prerelease/mac/documentation/Porting/Conceptual/PortingUnix/compiling/compiling.html" target="_blank"><a href="https://developer.apple.com/library/prerelease/mac/documentation/Porting/Conceptual/PortingUnix/compiling/compiling.html">https://developer.apple.com/library/prerelease/mac/documentation/Porting/Conceptual/PortingUnix/compiling/compiling.html</a></a>.</p>

<p>From this I found some useful compiler switches:</p>

<p><code>-framework</code> <em>framework</em> (in <code>LDFLAGS</code>)</p>

<p>Links the executable being built against the listed framework.<a name="//apple_ref/doc/uid/TP40002850-DontLinkElementID_69"></a> For example, you might add -framework vecLib to include support for vector math.</p>

<p><code>-mmacosx-version-min</code> <em>version</em></p>

<p>Specifies the version of OS X you are targeting. You must target your compile for the <em>oldest</em> version of OS X on which you want to run the executable. In addition, you should install and use the cross-development SDK for that version of OS X. For more information, see _<a href="https://developer.apple.com/library/prerelease/mac/documentation/DeveloperTools/Conceptual/cross_development/Introduction/Introduction.html#//apple_ref/doc/uid/10000163i" target="_blank" data-renderer-version="1">SDK Compatibility Guide</a>_.</p>

<p>and</p>

<p><code>-mmacosx-version-min&lt;tt&gt;=&lt;version&gt;&lt;/tt&gt;</code></p>

<p>When building for Mac OS X, specify the minimum version supported by your application.</p>

<p>The easiest way to build an app is to use a Makefile:</p>

<pre>RM=rm
MD=mkdir
CP=cp

GCC=gcc
CFLAGS=-framework Carbon -framework Audiounit -framework CoreAudio \
        -framework Accelerate -m32 -Wno-deprecated-declarations \
        -mmacosx-version-min=10.6

APPNAME=LMS

APPBUNDLE=$(APPNAME).app
APPBUNDLECONTENTS=$(APPBUNDLE)/Contents
APPBUNDLEMACOS=$(APPBUNDLECONTENTS)/MacOS
APPBUNDLERESOURCES=$(APPBUNDLECONTENTS)/Resources

appbundle: $(APPNAME) $(APPNAME).icns
    $(RM) -rf $(APPBUNDLE)
    $(MD) $(APPBUNDLE)
    $(MD) $(APPBUNDLECONTENTS)
    $(MD) $(APPBUNDLEMACOS)
    $(MD) $(APPBUNDLERESOURCES)
    $(CP) Info.plist $(APPBUNDLECONTENTS)/
    $(CP) PkgInfo $(APPBUNDLECONTENTS)/
    $(CP) $(APPNAME).icns $(APPBUNDLERESOURCES)/
    $(CP) $(APPNAME) $(APPBUNDLEMACOS)/

$(APPNAME): $(APPNAME).c
    $(GCC) $(APPNAME).c -o $(APPNAME) $(CFLAGS)

$(APPNAME).icns: $(APPNAME).png
    $(RM) -rf $(APPNAME).iconset
    $(MD) $(APPNAME).iconset
    sips -z 16 16   $(APPNAME).png --out $(APPNAME).iconset/icon_16x16.png
    sips -z 32 32   $(APPNAME).png --out $(APPNAME).iconset/icon_16x16@2x.png
    sips -z 32 32   $(APPNAME).png --out $(APPNAME).iconset/icon_32x32.png
    sips -z 64 64   $(APPNAME).png --out $(APPNAME).iconset/icon_32x32@2x.png
    sips -z 128 128 $(APPNAME).png --out $(APPNAME).iconset/icon_128x128.png
    sips -z 256 256 $(APPNAME).png --out $(APPNAME).iconset/icon_128x128@2x.png
    sips -z 256 256 $(APPNAME).png --out $(APPNAME).iconset/icon_256x256.png
    sips -z 512 512 $(APPNAME).png --out $(APPNAME).iconset/icon_256x256@2x.png
    sips -z 512 512 $(APPNAME).png --out $(APPNAME).iconset/icon_512x512.png
    $(CP) $(APPNAME).png $(APPNAME).iconset/icon_512x512@2x.png
    iconutil -c icns -o $(APPNAME).icns $(APPNAME).iconset
    $(RM) -r $(APPNAME).iconset</pre>

<p>This compiles the code, makes an icon file from an image and builds the app structure. The reason for the <code>-Wno-deprecated-declarations</code> is that this app was first written on OSX 10.4 using Carbon and I&#8217;m compiling for 10.6. You need two other text files <code>Info,plist</code> and <code>PkgInfo</code>.</p>

<pre>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"&gt;
  &lt;dict&gt;
    &lt;key&gt;CFBundleDevelopmentRegion&lt;/key&gt;
    &lt;string&gt;English&lt;/string&gt;
    &lt;key&gt;CFBundleExecutable&lt;/key&gt;
    &lt;string&gt;LMS&lt;/string&gt;
    &lt;key&gt;CFBundleGetInfoString&lt;/key&gt;
    &lt;string&gt;Copyright 2011 Bill Farmer&lt;/string&gt;
    &lt;key&gt;CFBundleIconFile&lt;/key&gt;
    &lt;string&gt;LMS&lt;/string&gt;
    &lt;key&gt;CFBundleIdentifier&lt;/key&gt;
    &lt;string&gt;com.billthefarmer.LMS&lt;/string&gt;
    &lt;key&gt;CFBundleInfoDictionaryVersion&lt;/key&gt;
    &lt;string&gt;6.0&lt;/string&gt;
    &lt;key&gt;CFBundleName&lt;/key&gt;
    &lt;string&gt;LMS&lt;/string&gt;
    &lt;key&gt;CFBundlePackageType&lt;/key&gt;
    &lt;string&gt;APPL&lt;/string&gt;
    &lt;key&gt;CFBundleShortVersionString&lt;/key&gt;
    &lt;string&gt;1.0&lt;/string&gt;
    &lt;key&gt;CFBundleSignature&lt;/key&gt;
    &lt;string&gt;LMS &lt;/string&gt;
    &lt;key&gt;CFBundleVersion&lt;/key&gt;
    &lt;string&gt;Version 1.0&lt;/string&gt;
    &lt;key&gt;LSApplicationCategoryType&lt;/key&gt;
    &lt;string&gt;public.app-category.utilities&lt;/string&gt;
  &lt;/dict&gt;
&lt;/plist&gt;</pre>

<p>The PkgInfo file is just one line, the package type and the app signature concatenated.</p>

<pre>APPLLMS</pre>

<p><a href="http://billthefarmer.users.sourceforge.net/wordpress/wp-content/uploads/2016/02/Emacs.png" rel="attachment wp-att-351"><img class="alignnone size-full wp-image-351" src="http://billthefarmer.users.sourceforge.net/wordpress/wp-content/uploads/2016/02/Emacs.png" alt="Emacs" width="600" height="516" srcset="http://billthefarmer.users.sourceforge.net/wordpress/wp-content/uploads/2016/02/Emacs.png 600w, http://billthefarmer.users.sourceforge.net/wordpress/wp-content/uploads/2016/02/Emacs-300x258.png 300w" sizes="(max-width: 600px) 100vw, 600px" /></a></p>

    </p>
    
    <hr>
  </div>

  


        </div>
          <div class="medium-3 columns" data-sticky-container>
  <div class="sticky" data-sticky data-anchor="content">

  

  

  <h4>Recent Posts</h4>
  <ul>
    
      <li><a href="/blog/resolving-content-uris-in-android/">
        Resolving content uris in android
      </a></li>
    
      <li><a href="/blog/vegetables-cooked-in-olive-oil/">
        Vegetables cooked in olive oil
      </a></li>
    
      <li><a href="/blog/slow-cooked-ox-cheek/">
        Slow cooked ox cheek
      </a></li>
    
      <li><a href="/blog/handling-run-time-changes-in-android/">
        Handling run time changes in Android
      </a></li>
    
      <li><a href="/blog/using-emacs-as-an-ide/">
        Using Emacs as an IDE
      </a></li>
    
  </ul>

  
    <h4>Links</h4>
    <ul>
      
        <li><a href="http://billthefarmer.github.io">
          Bill Farmer
        </a></li>
      
        <li><a href="https://github.com/billthefarmer">
          Github
        </a></li>
      
    </ul>
  

  </div>
</div>

      </div>
    </main>

    <footer class="blog-footer">
      <div class="row column">
        <p>
          
          Copyright &copy; 2017 Bill Farmer
          
        </p>
        <p>
          <a href="http://billthefarmer.github.io/blog/build-mac-osx-apps-using-command-line-tools/#">Back to top</a>
        </p>
      </div>
    </footer>

  <foot>

    <script src="http://billthefarmer.github.io/blogjs/app.js"></script>

  </foot>
  </body>
</html>
