<!DOCTYPE html>
<html lang="en">
  <head><script src="/blog/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=blog/livereload" data-no-instant defer></script>

    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->

<meta property="og:url" content="http://localhost:1313/blog/">
  <meta property="og:site_name" content="Bill Farmer">
  <meta property="og:title" content="Bill Farmer">
  <meta property="og:description" content="Random thoughts on random subjects">
  <meta property="og:locale" content="en_gb">
  <meta property="og:type" content="website">


  <meta itemprop="name" content="Bill Farmer">
  <meta itemprop="description" content="Random thoughts on random subjects">
  <meta itemprop="datePublished" content="2024-03-02T13:52:23+00:00">
  <meta itemprop="dateModified" content="2024-03-02T13:52:23+00:00">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Bill Farmer">
  <meta name="twitter:description" content="Random thoughts on random subjects">






<meta name="generator" content="Hugo 0.153.0">


    <base href="http://localhost:1313/blog/">
    <link rel="canonical" href="http://localhost:1313/blog/">
    <title>Bill Farmer</title>

    <!-- CSS -->
    <link href="http://localhost:1313/blog/css/app.css" rel="stylesheet">
    
    <!-- RSS 2.0 feed -->
      <link rel="alternate" type="application/rss+xml" href="http://localhost:1313/blog/index.xml" title="Bill Farmer" />
    

    

<style>
.callout.large {
    background-image: url(http://localhost:1313/blog/images/2013/12/cropped-P1010089.jpg);
    background-size: cover;
    background-position: center center;
    background-repeat: no-repeat;
}
.callout.large a, .callout.large p {
    color: white;
}
pre {
    margin-top: 16px;
    margin-bottom: 16px;
}
code {
    padding: 0;
    border: 0;
    background-color: #fff;
    font-family: Consolas, "Liberation Mono", Courier, monospace;
    font-weight: normal;
    color: #0a0a0a;
}
table {
    width: auto !important;
}
</style>




  </head>
  <body>

    <header class="nav">
      <div class="top-bar">
        <div class="row column">
          <div class="top-bar-left">
            <ul class="menu">
              <li class="active"><a href="http://localhost:1313/blog/">
                Home
              </a></li>
              
                
                  <li><a href="http://localhost:1313/blog/categories/">
                    Categories
                  </a></li>
                
                  <li><a href="http://localhost:1313/blog/categories/travel/">
                    Travel
                  </a></li>
                
                  <li><a href="http://localhost:1313/blog/categories/hacking/">
                    Hacking
                  </a></li>
                
                  <li><a href="http://localhost:1313/blog/categories/recipes/">
                    Recipes
                  </a></li>
                
                  <li><a href="http://localhost:1313/blog/categories/diy/">
                    DIY
                  </a></li>
                
                  <li><a href="http://localhost:1313/blog/categories/electronics/">
                    Electronics
                  </a></li>
                
                  <li><a href="http://localhost:1313/blog/index/">
                    Index
                  </a></li>
                
                  <li><a href="http://localhost:1313/blog/morris-o-meter/">
                    Morris-o-meter
                  </a></li>
                
                  <li><a href="http://localhost:1313/blog/about/">
                    About
                  </a></li>
                
                  <li><a href="http://localhost:1313/blog/test-o-meter/">
                    Test-o-meter
                  </a></li>
                
              
            </ul>
          </div>
        </div>
      </div>
    </header>

    <header class="blog-header">
      <div class="callout large">
        <div class="row column text-center">
          <h1>
            <a href="http://localhost:1313/blog/" rel="home">Bill Farmer</a>
          </h1>
          
            <p>
              Random thoughts on random subjects
            </p>
          
        </div>
      </div>
    </header>

    <main>
      <div class="row" id="content">
        <div class="medium-8 columns">
          




  




  

<div class="blog-post">
  <h3>
    <a href="http://localhost:1313/blog/banana-cake/">Marion&rsquo;s Banana and Walnut Cake</a>
  </h3>
  <div class="callout small">
    <small>
      <time datetime="2020-02-27T16:21:35Z">
        Thu Feb 27, 2020
      </time> by Marion Farmer.
      Categories: 
  
    
      <a href="/categories/recipes">
        Recipes
      </a>
  

.
      
    </small>
  </div>
  <p>
    <p>This cake is delicious, quick and easy to make.The amount of sugar is
reduced because the banana has natural sweetness. I have substituted
rapeseed oil for cooking margarine as it is a healthier option. Using
this method you do not need a food processor.</p>
<h3 id="ingredients">Ingredients</h3>
<ul>
<li>225g (8oz) self raising flour</li>
<li>1 level teaspoon baking powder</li>
<li>55g (2oz) demerara sugar</li>
<li>2 large ripe bananas</li>
<li>55g (2oz) walnut pieces</li>
<li>55g (2oz) sultanas</li>
<li>2 eggs</li>
<li>2 tablespoons rapeseed oil</li>
<li>milk to mix</li>
</ul>
<p>  20cm cake tin (or similar)</p>
  </p>
  <a href='http://localhost:1313/blog/banana-cake/'>Read more →</a>
  <hr>
</div>


  

<div class="blog-post">
  <h3>
    <a href="http://localhost:1313/blog/hiding-button/">Hiding Edit Button</a>
  </h3>
  <div class="callout small">
    <small>
      <time datetime="2020-02-15T20:59:47Z">
        Sat Feb 15, 2020
      </time> by Bill Farmer.
      Categories: 
  
    
      <a href="/categories/hacking">
        Hacking
      </a>
  

.
      
    </small>
  </div>
  <p>
    <p>My <a href="https://github.com/billthefarmer/diary">Diary</a> and <a href="https://github.com/billthefarmer/notes">Notes</a> apps have a floating button in the corner
of the screen which is used to switch between editing markdown text
and viewing the result. Although it is part of the android Material
Design, this button has been the subject of several issues raised by
users.</p>
<p>I have seen apps which hide this button on scrolling, and this was one
of the suggestions by users. Getting this to work correctly turned out
to be more complex than initially considered, requiring two boolean
flags and a lambda expression.</p>
  </p>
  <a href='http://localhost:1313/blog/hiding-button/'>Read more →</a>
  <hr>
</div>


  

<div class="blog-post">
  <h3>
    <a href="http://localhost:1313/blog/derive-edit-position/">Derive Edit Position from Markdown</a>
  </h3>
  <div class="callout small">
    <small>
      <time datetime="2020-02-08T18:24:23Z">
        Sat Feb 8, 2020
      </time> by Bill Farmer.
      Categories: 
  
    
      <a href="/categories/hacking">
        Hacking
      </a>
  

.
      
    </small>
  </div>
  <p>
    <p>I had a request to switch to the edit view from the markdown view at
the double tap position in my <a href="https://github.com/billthefarmer/diary">Diary</a> app. The app already has a
gesture detector so I just had to add an <a href="https://developer.android.com/reference/android/view/GestureDetector.SimpleOnGestureListener.html#onDoubleTap(android.view.MotionEvent)">onDoubleTap</a> function.</p>
<p>To get the tap position in the markdown view it is necessary to
compensate for the position of the view on the screen, scrolling, and
the display density.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#080;font-style:italic">// onDoubleTap</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#a2f">@Override</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#a2f;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#0b0;font-weight:bold">boolean</span><span style="color:#bbb"> </span><span style="color:#00a000">onDoubleTap</span>(MotionEvent<span style="color:#bbb"> </span>e)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span><span style="color:#a2f;font-weight:bold">if</span><span style="color:#bbb"> </span>(shown)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                </span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">[]</span><span style="color:#bbb"> </span>l<span style="color:#bbb"> </span><span style="color:#666">=</span><span style="color:#bbb"> </span><span style="color:#a2f;font-weight:bold">new</span><span style="color:#bbb"> </span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">[</span>2<span style="color:#666">]</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                </span>markdownView.<span style="color:#b44">getLocationOnScreen</span>(l);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                </span><span style="color:#080;font-style:italic">// Get tap position</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                </span><span style="color:#0b0;font-weight:bold">float</span><span style="color:#bbb"> </span>y<span style="color:#bbb"> </span><span style="color:#666">=</span><span style="color:#bbb"> </span>e.<span style="color:#b44">getY</span>()<span style="color:#bbb"> </span><span style="color:#666">-</span><span style="color:#bbb"> </span>l<span style="color:#666">[</span>1<span style="color:#666">]</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                </span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#bbb"> </span>scrollY<span style="color:#bbb"> </span><span style="color:#666">=</span><span style="color:#bbb"> </span>markdownView.<span style="color:#b44">getScrollY</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                </span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#bbb"> </span>contentHeight<span style="color:#bbb"> </span><span style="color:#666">=</span><span style="color:#bbb"> </span>markdownView.<span style="color:#b44">getContentHeight</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                </span><span style="color:#0b0;font-weight:bold">float</span><span style="color:#bbb"> </span>density<span style="color:#bbb"> </span><span style="color:#666">=</span><span style="color:#bbb"> </span>getResources().<span style="color:#b44">getDisplayMetrics</span>().<span style="color:#b44">density</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                </span><span style="color:#080;font-style:italic">// Get markdown position</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">                </span><span style="color:#a2f;font-weight:bold">final</span><span style="color:#bbb"> </span><span style="color:#0b0;font-weight:bold">float</span><span style="color:#bbb"> </span>p<span style="color:#bbb"> </span><span style="color:#666">=</span><span style="color:#bbb"> </span>(y<span style="color:#bbb"> </span><span style="color:#666">+</span><span style="color:#bbb"> </span>scrollY)<span style="color:#bbb"> </span><span style="color:#666">/</span><span style="color:#bbb"> </span>(contentHeight<span style="color:#bbb"> </span><span style="color:#666">*</span><span style="color:#bbb"> </span>density);<span style="color:#bbb">
</span></span></span></code></pre></div><p>The function to get the view location on screen is a bit arcane in
that you must provide a two element array for the X and Y
co-ordinates. The position as a proportion of the total length of the
displayed markdown is calculated from the corrected Y position, the
scroll position and the density.</p>
  </p>
  <a href='http://localhost:1313/blog/derive-edit-position/'>Read more →</a>
  <hr>
</div>


  

<div class="blog-post">
  <h3>
    <a href="http://localhost:1313/blog/fixing-basin-waste-pop-up/">Fixing Basin Waste Pop Up</a>
  </h3>
  <div class="callout small">
    <small>
      <time datetime="2019-07-12T10:49:21&#43;01:00">
        Fri Jul 12, 2019
      </time> by Bill Farmer.
      Categories: 
  
    
      <a href="/categories/diy">
        DIY
      </a>
  

.
      
    </small>
  </div>
  <p>
    <p>There are two things that seem to go wrong with pop up basin waste
plugs, either the clicker stops working or the O ring washer fails.</p>
<h3 id="clicker">Clicker</h3>
<p><img src="images/2019/07/P1030007.JPG" alt="Clicker"></p>
<p>The clicker can stay stuck down, refuse to stay down or come apart.</p>
<p>If it sticks down it can possibly be pulled back up with a drain
plunger, otherwise you will need to take off the U bend and poke it
back up with a long screwdriver. To take it out, unscrew the plug from
the top and use a small adjustable spanner to remove the clicker. It
will be choked up with sludge and hair, clean it out and put some
petroleum jelly or WD40 on it for lubrication. It should then work again.</p>
  </p>
  <a href='http://localhost:1313/blog/fixing-basin-waste-pop-up/'>Read more →</a>
  <hr>
</div>


  

<div class="blog-post">
  <h3>
    <a href="http://localhost:1313/blog/pi-hole-cloudflare-setup/">Pi-hole Cloudflare, DNSCrypt, Unbound Setup</a>
  </h3>
  <div class="callout small">
    <small>
      <time datetime="2019-06-17T18:30:39&#43;01:00">
        Mon Jun 17, 2019
      </time> by Bill Farmer.
      Categories: 
  
    
      <a href="/categories/hacking">
        Hacking
      </a>
  

.
      
    </small>
  </div>
  <p>
    <h3 id="pi-hole">Pi-hole</h3>
<p>I came across a reference to <a href="https://pi-hole.net">Pi-hole</a> recently, so as my old pi
has been gathering dust, I thought I would try it out. The pi already
had <a href="https://www.raspberrypi.org/downloads/raspbian">Raspbian Stretch Lite</a> installed, so I uninstalled some of the
packages I had previously installed, and loaded Pi-Hole using the
<a href="https://github.com/pi-hole/pi-hole/#one-step-automated-install">One-Step Automated Install</a>.</p>
<p>The installation script asks a series of questions using text dialogs
and produces a log as it goes.</p>
<pre tabindex="0"><code class="language-log" data-lang="log">pi@catherine:~ $ curl -sSL https://install.pi-hole.net | bash
stty: &#39;standard input&#39;: Inappropriate ioctl for device

  [✗] Root user check
  [i] Script called with non-root privileges
      The Pi-hole requires elevated privileges to install and run
      Please check the installer for any concerns regarding this requirement
      Make sure to download this script from a trusted source

  [✓] Sudo utility check
stty: &#39;standard input&#39;: Inappropriate ioctl for device

  [✓] Root user check

  [i] Existing PHP installation detected : PHP version 7.0.33-0+deb9u3
  [✓] Disk space check
  [✓] Update local cache of available packages

  [✓] Checking apt-get for upgraded packages... up to date!

  [i] Installer Dependency checks...
  [✓] Checking for apt-utils
  [✓] Checking for dialog
  [✓] Checking for debconf
  [✓] Checking for dhcpcd5
  [✓] Checking for git
  [✓] Checking for iproute2
  [✓] Checking for whiptail

  [i] Using interface: eth0
  [i] Using Cloudflare
  [i] Your static IPv4 address: 192.168.1.252
  [i] Your static IPv4 gateway: 192.168.1.254
  [✓] Set IP address to 192.168.1.252
  You may need to restart after the install is complete
  [i] IPv4 address: 192.168.1.252
  [i] IPv6 address:
  [i] Web Interface On
  [i] Web Server On
  [i] Logging On.
  [✗] Check for existing repository in /etc/.pihole
  [✓] Clone https://github.com/pi-hole/pi-hole.git into /etc/.pihole

  [✗] Check for existing repository in /var/www/html/admin
  [✓] Clone https://github.com/pi-hole/AdminLTE.git into /var/www/html/admin

  [i] Main Dependency checks...
  [✓] Checking for cron
  [✓] Checking for curl
  [✓] Checking for dnsutils
  [✓] Checking for iputils-ping
  [✓] Checking for lsof
  [✓] Checking for netcat
  [✓] Checking for psmisc
  [✓] Checking for sudo
  [✓] Checking for unzip
  [✓] Checking for wget
  [✓] Checking for idn2
  [✓] Checking for sqlite3
  [✓] Checking for libcap2-bin
  [✓] Checking for dns-root-data
  [✓] Checking for resolvconf
  [✓] Checking for libcap2
  [✓] Checking for lighttpd
  [✓] Checking for php7.0-common
  [✓] Checking for php7.0-cgi
  [✓] Checking for php7.0-sqlite3

  [✓] Enabling lighttpd service to start on reboot...

  [i] FTL Checks...

  [✓] Detected ARM-hf architecture (armv6l)
  [i] Checking for existing FTL binary...
  [✓] Downloading and Installing FTL
  [✓] Creating user &#39;pihole&#39;
  [✓] Installing scripts from /etc/.pihole

  [i] Installing configs from /etc/.pihole...
  [i] Existing dnsmasq.conf found... it is not a Pi-hole file, leaving alone!
  [✓] Copying 01-pihole.conf to /etc/dnsmasq.d/01-pihole.conf

  [i] Installing blocking page...
  [✓] Creating directory for blocking page, and copying files
  [✗] Backing up index.lighttpd.html
      No default index.lighttpd.html file found... not backing up

  [✓] Installing sudoer file

  [✓] Installing latest Cron script

  [✓] Installing latest logrotate script
  [i] Backing up /etc/dnsmasq.conf to /etc/dnsmasq.conf.old

  [i] Skipping firewall configuration
  [✓] man pages installed and database updated
  [i] Testing if systemd-resolved is enabled
  [i] Systemd-resolved is not enabled
  [✓] Restarting lighttpd service...
  [✓] Enabling lighttpd service to start on reboot...
  [i] Restarting services...
  [✓] Enabling pihole-FTL service to start on reboot...
  [✓] Restarting pihole-FTL service...
  [✓] Deleting existing list cache
  [i] Pi-hole blocking is enabled
  [i] Neutrino emissions detected...
  [✓] Pulling blocklist source list into range

  [i] Target: raw.githubusercontent.com (hosts)
  [✓] Status: Retrieval successful

  [i] Target: mirror1.malwaredomains.com (justdomains)
  [✓] Status: Retrieval successful

  [i] Target: sysctl.org (hosts)
  [✓] Status: Retrieval successful

  [i] Target: zeustracker.abuse.ch (blocklist.php?download=domainblocklist)
  [✓] Status: Retrieval successful

  [i] Target: s3.amazonaws.com (simple_tracking.txt)
  [✓] Status: Retrieval successful

  [i] Target: s3.amazonaws.com (simple_ad.txt)
  [✓] Status: Retrieval successful

  [i] Target: hosts-file.net (ad_servers.txt)
  [✓] Status: Retrieval successful

  [✓] Consolidating blocklists
  [✓] Extracting domains from blocklists
  [i] Number of domains being pulled in by gravity: 135697
  [✓] Removing duplicate domains
  [i] Number of unique domains trapped in the Event Horizon: 113438
  [i] Nothing to whitelist!
  [i] Number of regex filters: 0
  [✓] Parsing domains into hosts format
  [✓] Cleaning up stray matter

  [✓] Force-reloading DNS service
  [✓] DNS service is running
  [i] Pi-hole blocking will be enabled
  [i] Enabling blocking
  [✓] Reloading DNS service
  [✓] Pi-hole Enabled
  [i] Web Interface password: ********
  [i] This can be changed using &#39;pihole -a -p&#39;

  [i] View the web interface at http://pi.hole/admin or http://192.168.1.252/admin

  [i] You may now configure your devices to use the Pi-hole as their DNS server
  [i] Pi-hole DNS (IPv4): 192.168.1.252
  [i] If you set a new IP address, please restart the server running the Pi-hole

  [i] The install log is located at: /etc/pihole/install.log
Installation Complete!
</code></pre><p>My router uses the IP address <code>192.168.1.254</code> and allocates <a href="https://en.wikipedia.org/wiki/Dynamic_Host_Configuration_Protocol">DHCP</a>
IP addresses from <code>192.168.1.1</code> and does not allow DHCP
configuration. I opted to use the ethernet port and use IP address
<code>192.168.1.252</code> and the Cloudflare DNS service. The router does allow
DNS configuration, so I changed the default DNS to <code>192.168.1.252</code> so
I don&rsquo;t have to make any changes to DNS configuration elsewhere.</p>
  </p>
  <a href='http://localhost:1313/blog/pi-hole-cloudflare-setup/'>Read more →</a>
  <hr>
</div>




  <div>
    
      <a class="button" href="/blog/page/4/">Previous page</a>
      <a class="button" href="/blog/page/6/">Next page</a>
    
    
    
    <hr>
  </div>



        </div>
          <div class="medium-3 columns" data-sticky-container>
  <div class="sticky" data-sticky data-anchor="content">

  

  

  <h4>Recent Posts</h4>
  <ul>
    
      <li><a href="/blog/beach-villas/">
        Beach Villas
      </a></li>
    
      <li><a href="/blog/flutter-search-widget/">
        Flutter app bar search widget
      </a></li>
    
      <li><a href="/blog/android-navigation-menu/">
        Android Navigation Menu
      </a></li>
    
      <li><a href="/blog/update-widget/">
        Update App Widget
      </a></li>
    
      <li><a href="/blog/turkey-cabbage-wraps/">
        Turkey Cabbage Wraps
      </a></li>
    
      <li><a href="/blog/create-word-grid/">
        Create a Word Grid
      </a></li>
    
      <li><a href="/blog/read-paywalled-articles/">
        Read Paywalled Newspaper Articles
      </a></li>
    
      <li><a href="/blog/risotto-milanese/">
        Risotto Milanese
      </a></li>
    
      <li><a href="/blog/android-flutter/">
        Android Flutter
      </a></li>
    
      <li><a href="/blog/android-kotlin/">
        Android Kotlin
      </a></li>
    
  </ul>

  
    <h4>Links</h4>
    <ul>
      
        <li><a href="https://github.com/billthefarmer">
          Github
        </a></li>
      
        <li><a href="https://gitlab.com/williamjfarmer">
          Gitlab
        </a></li>
      
        <li><a href="http://billthefarmer.github.io">
          Home
        </a></li>
      
    </ul>
  

  </div>
</div>

      </div>
    </main>

    <footer class="blog-footer">
      <div class="row column">
        <p>
          
          Copyright © 2025 Bill Farmer
          
        </p>
        <p>
          <a href="http://localhost:1313/blog/#">Back to top</a>
        </p>
      </div>
    </footer>

  <foot>

    <script src="http://localhost:1313/blog/js/app.js"></script>

  </foot>
  </body>
</html>
