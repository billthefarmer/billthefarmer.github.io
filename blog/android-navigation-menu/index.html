<!DOCTYPE html>
<html lang="en">
  <head>

    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->

<meta property="og:title" content="Android Navigation Menu" />
<meta property="og:description" content="Android versions from android 5 use a Toolbar as the ActionBar, but there appears to be no obvious API access.
However, by traversing the view hierarchy, it can be found and used to set up app navigation.
Create a recursive function to traverse the views and find the toolbar.
// findToolbar private Toolbar findToolbar(ViewGroup group) { View result = null; final int count = group.getChildCount(); for (int i = 0; i &lt; count; i&#43;&#43;) { View view = group." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://billthefarmer.github.io/blog/android-navigation-menu/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2023-09-06T13:46:00+01:00" />
<meta property="article:modified_time" content="2023-09-06T13:46:00+01:00" />

<meta itemprop="name" content="Android Navigation Menu">
<meta itemprop="description" content="Android versions from android 5 use a Toolbar as the ActionBar, but there appears to be no obvious API access.
However, by traversing the view hierarchy, it can be found and used to set up app navigation.
Create a recursive function to traverse the views and find the toolbar.
// findToolbar private Toolbar findToolbar(ViewGroup group) { View result = null; final int count = group.getChildCount(); for (int i = 0; i &lt; count; i&#43;&#43;) { View view = group."><meta itemprop="datePublished" content="2023-09-06T13:46:00+01:00" />
<meta itemprop="dateModified" content="2023-09-06T13:46:00+01:00" />
<meta itemprop="wordCount" content="233">
<meta itemprop="keywords" content="" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Android Navigation Menu"/>
<meta name="twitter:description" content="Android versions from android 5 use a Toolbar as the ActionBar, but there appears to be no obvious API access.
However, by traversing the view hierarchy, it can be found and used to set up app navigation.
Create a recursive function to traverse the views and find the toolbar.
// findToolbar private Toolbar findToolbar(ViewGroup group) { View result = null; final int count = group.getChildCount(); for (int i = 0; i &lt; count; i&#43;&#43;) { View view = group."/>






<meta name="generator" content="Hugo 0.119.0">


    <base href="https://billthefarmer.github.io/blog/">
    <link rel="canonical" href="https://billthefarmer.github.io/blog/android-navigation-menu/">
    <title>Android Navigation Menu | Bill Farmer</title>

    <!-- CSS -->
    <link href="https://billthefarmer.github.io/blog/css/app.css" rel="stylesheet">
    
    

    
    

<style>
.callout.large {
    background-image: url(https://billthefarmer.github.io/blog/images/2013/12/cropped-P1010089.jpg);
    background-size: cover;
    background-position: center center;
    background-repeat: no-repeat;
}
.callout.large a, .callout.large p {
    color: white;
}
pre {
    margin-top: 16px;
    margin-bottom: 16px;
}
code {
    padding: 0;
    border: 0;
    background-color: #fff;
    font-family: Consolas, "Liberation Mono", Courier, monospace;
    font-weight: normal;
    color: #0a0a0a;
}
table {
    width: auto !important;
}
</style>




  </head>
  <body>

    <header class="nav">
      <div class="top-bar">
        <div class="row column">
          <div class="top-bar-left">
            <ul class="menu">
              <li class=""><a href="https://billthefarmer.github.io/blog/">
                Home
              </a></li>
              
                
                  <li><a href="https://billthefarmer.github.io/blog/categories/">
                    Categories
                  </a></li>
                
                  <li><a href="https://billthefarmer.github.io/blog/categories/hacking/">
                    Hacking
                  </a></li>
                
                  <li><a href="https://billthefarmer.github.io/blog/categories/recipes/">
                    Recipes
                  </a></li>
                
                  <li><a href="https://billthefarmer.github.io/blog/categories/diy/">
                    DIY
                  </a></li>
                
                  <li><a href="https://billthefarmer.github.io/blog/categories/electronics/">
                    Electronics
                  </a></li>
                
                  <li><a href="https://billthefarmer.github.io/blog/index/">
                    Index
                  </a></li>
                
                  <li><a href="https://billthefarmer.github.io/blog/morris-o-meter/">
                    Morris-o-meter
                  </a></li>
                
                  <li><a href="https://billthefarmer.github.io/blog/about/">
                    About
                  </a></li>
                
                  <li><a href="https://billthefarmer.github.io/blog/test-o-meter/">
                    Test-o-meter
                  </a></li>
                
              
            </ul>
          </div>
        </div>
      </div>
    </header>

    <header class="blog-header">
      <div class="callout large">
        <div class="row column text-center">
          <h1>
            <a href="https://billthefarmer.github.io/blog/" rel="home">Bill Farmer</a>
          </h1>
          
            <p>
              Random thoughts on random subjects
            </p>
          
        </div>
      </div>
    </header>

    <main>
      <div class="row" id="content">
        <div class="medium-8 columns">
          
  


  <div class="blog-post">
    <h3>
      <a href="https://billthefarmer.github.io/blog/android-navigation-menu/">Android Navigation Menu</a>
    </h3>
    <div class="callout small">
      <small>
        <time datetime="2023-09-06T13:46:00&#43;01:00">
          Wed Sep 6, 2023
        </time> by Bill Farmer.
        Categories: 
  
    
      <a href="/categories/hacking">
        Hacking
      </a>
  

.
        
        <br>
        
      </small>
    </div>
    <p>
      <p>Android versions from android 5 use a <a href="https://developer.android.com/reference/android/widget/Toolbar?hl=en">Toolbar</a> as the
<a href="https://developer.android.com/reference/android/app/ActionBar?hl=en">ActionBar</a>, but there appears to be no obvious API access.</p>
<p>However, by traversing the view hierarchy, it can be found and used to
set up app navigation.</p>
<p><img src="images/2023/09/Navigation.png" alt="Navigation"></p>
<p>Create a recursive function to traverse the views and find the toolbar.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>    <span style="color:#080;font-style:italic">// findToolbar
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>    <span style="color:#a2f;font-weight:bold">private</span> Toolbar <span style="color:#00a000">findToolbar</span><span style="color:#666">(</span>ViewGroup group<span style="color:#666">)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#666">{</span>
</span></span><span style="display:flex;"><span>        View result <span style="color:#666">=</span> <span style="color:#a2f;font-weight:bold">null</span><span style="color:#666">;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">final</span> <span style="color:#0b0;font-weight:bold">int</span> count <span style="color:#666">=</span> group<span style="color:#666">.</span><span style="color:#b44">getChildCount</span><span style="color:#666">();</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">for</span> <span style="color:#666">(</span><span style="color:#0b0;font-weight:bold">int</span> i <span style="color:#666">=</span> <span style="color:#666">0</span><span style="color:#666">;</span> i <span style="color:#666">&lt;</span> count<span style="color:#666">;</span> i<span style="color:#666">++)</span>
</span></span><span style="display:flex;"><span>        <span style="color:#666">{</span>
</span></span><span style="display:flex;"><span>            View view <span style="color:#666">=</span> group<span style="color:#666">.</span><span style="color:#b44">getChildAt</span><span style="color:#666">(</span>i<span style="color:#666">);</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a2f;font-weight:bold">if</span> <span style="color:#666">(</span>view <span style="color:#a2f;font-weight:bold">instanceof</span> Toolbar<span style="color:#666">)</span>
</span></span><span style="display:flex;"><span>                <span style="color:#a2f;font-weight:bold">return</span> <span style="color:#666">(</span>Toolbar<span style="color:#666">)</span> view<span style="color:#666">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#a2f;font-weight:bold">if</span> <span style="color:#666">(</span>view <span style="color:#a2f;font-weight:bold">instanceof</span> ViewGroup<span style="color:#666">)</span>
</span></span><span style="display:flex;"><span>                result <span style="color:#666">=</span> findToolbar<span style="color:#666">((</span>ViewGroup<span style="color:#666">)</span> view<span style="color:#666">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#a2f;font-weight:bold">if</span> <span style="color:#666">(</span>result <span style="color:#666">!=</span> <span style="color:#a2f;font-weight:bold">null</span><span style="color:#666">)</span>
</span></span><span style="display:flex;"><span>                <span style="color:#a2f;font-weight:bold">break</span><span style="color:#666">;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#666">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">return</span> <span style="color:#666">(</span>Toolbar<span style="color:#666">)</span> result<span style="color:#666">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#666">}</span>
</span></span></code></pre></div><p>Having written this hack, I then discovered a more efficient way using
built in functionality.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>        <span style="color:#080;font-style:italic">// Find toolbar
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>        toolbar <span style="color:#666">=</span> findViewById<span style="color:#666">(</span>getResources<span style="color:#666">().</span><span style="color:#b44">getIdentifier</span><span style="color:#666">(</span><span style="color:#b44">&#34;action_bar&#34;</span><span style="color:#666">,</span>
</span></span><span style="display:flex;"><span>                                                            <span style="color:#b44">&#34;id&#34;</span><span style="color:#666">,</span> <span style="color:#b44">&#34;android&#34;</span><span style="color:#666">));</span>
</span></span></code></pre></div><p>Set up navigation on the toolbar.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>        <span style="color:#080;font-style:italic">// Find toolbar
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>        ViewGroup root <span style="color:#666">=</span> <span style="color:#666">(</span>ViewGroup<span style="color:#666">)</span> getWindow<span style="color:#666">().</span><span style="color:#b44">getDecorView</span><span style="color:#666">();</span>
</span></span><span style="display:flex;"><span>        toolbar <span style="color:#666">=</span> findToolbar<span style="color:#666">(</span>root<span style="color:#666">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#080;font-style:italic">// Set up navigation
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>        toolbar<span style="color:#666">.</span><span style="color:#b44">setNavigationIcon</span><span style="color:#666">(</span>R<span style="color:#666">.</span><span style="color:#b44">drawable</span><span style="color:#666">.</span><span style="color:#b44">ic_menu_white_36dp</span><span style="color:#666">);</span>
</span></span><span style="display:flex;"><span>        toolbar<span style="color:#666">.</span><span style="color:#b44">setNavigationOnClickListener</span><span style="color:#666">((</span>v<span style="color:#666">)</span> <span style="color:#666">-&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#666">{</span>
</span></span><span style="display:flex;"><span>            PopupMenu popup <span style="color:#666">=</span> <span style="color:#a2f;font-weight:bold">new</span> PopupMenu<span style="color:#666">(</span><span style="color:#a2f;font-weight:bold">this</span><span style="color:#666">,</span> v<span style="color:#666">);</span>
</span></span><span style="display:flex;"><span>            popup<span style="color:#666">.</span><span style="color:#b44">inflate</span><span style="color:#666">(</span>R<span style="color:#666">.</span><span style="color:#b44">menu</span><span style="color:#666">.</span><span style="color:#b44">navigation</span><span style="color:#666">);</span>
</span></span><span style="display:flex;"><span>            popup<span style="color:#666">.</span><span style="color:#b44">setOnMenuItemClickListener</span><span style="color:#666">(</span><span style="color:#a2f;font-weight:bold">this</span><span style="color:#666">);</span>
</span></span><span style="display:flex;"><span>            popup<span style="color:#666">.</span><span style="color:#b44">show</span><span style="color:#666">();</span>
</span></span><span style="display:flex;"><span>        <span style="color:#666">});</span>
</span></span></code></pre></div><p>Create a menu.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#080">&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">&lt;menu</span> <span style="color:#b44">xmlns:android=</span><span style="color:#b44">&#34;http://schemas.android.com/apk/res/android&#34;</span><span style="color:#008000;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#008000;font-weight:bold">&lt;item</span>
</span></span><span style="display:flex;"><span>      <span style="color:#b44">android:id=</span><span style="color:#b44">&#34;@+id/app_name&#34;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#b44">android:title=</span><span style="color:#b44">&#34;@string/short_name&#34;</span> <span style="color:#008000;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#008000;font-weight:bold">&lt;item</span>
</span></span><span style="display:flex;"><span>      <span style="color:#b44">android:id=</span><span style="color:#b44">&#34;@+id/action_spectrum&#34;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#b44">android:title=</span><span style="color:#b44">&#34;@string/action_spectrum&#34;</span> <span style="color:#008000;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#008000;font-weight:bold">&lt;item</span>
</span></span><span style="display:flex;"><span>      <span style="color:#b44">android:id=</span><span style="color:#b44">&#34;@+id/action_help&#34;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#b44">android:title=</span><span style="color:#b44">&#34;@string/action_help&#34;</span> <span style="color:#008000;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#008000;font-weight:bold">&lt;item</span>
</span></span><span style="display:flex;"><span>      <span style="color:#b44">android:id=</span><span style="color:#b44">&#34;@+id/action_settings&#34;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#b44">android:title=</span><span style="color:#b44">&#34;@string/action_settings&#34;</span> <span style="color:#008000;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">&lt;/menu&gt;</span>
</span></span></code></pre></div><p>And a menu click listener.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>    <span style="color:#080;font-style:italic">// onMenuItemClick
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>    <span style="color:#a2f">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">public</span> <span style="color:#0b0;font-weight:bold">boolean</span> <span style="color:#00a000">onMenuItemClick</span><span style="color:#666">(</span>MenuItem item<span style="color:#666">)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#666">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#080;font-style:italic">// Get id
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>        <span style="color:#0b0;font-weight:bold">int</span> id <span style="color:#666">=</span> item<span style="color:#666">.</span><span style="color:#b44">getItemId</span><span style="color:#666">();</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">switch</span> <span style="color:#666">(</span>id<span style="color:#666">)</span>
</span></span><span style="display:flex;"><span>        <span style="color:#666">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#080;font-style:italic">// Spectrum
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>        <span style="color:#a2f;font-weight:bold">case</span> R<span style="color:#666">.</span><span style="color:#b44">id</span><span style="color:#666">.</span><span style="color:#b44">action_spectrum</span><span style="color:#666">:</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a2f;font-weight:bold">return</span> onSpectrumClick<span style="color:#666">(</span>item<span style="color:#666">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#080;font-style:italic">// Help
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>        <span style="color:#a2f;font-weight:bold">case</span> R<span style="color:#666">.</span><span style="color:#b44">id</span><span style="color:#666">.</span><span style="color:#b44">action_help</span><span style="color:#666">:</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a2f;font-weight:bold">return</span> onHelpClick<span style="color:#666">(</span>item<span style="color:#666">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#080;font-style:italic">// Settings
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>        <span style="color:#a2f;font-weight:bold">case</span> R<span style="color:#666">.</span><span style="color:#b44">id</span><span style="color:#666">.</span><span style="color:#b44">action_settings</span><span style="color:#666">:</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a2f;font-weight:bold">return</span> onSettingsClick<span style="color:#666">(</span>item<span style="color:#666">);</span>
</span></span><span style="display:flex;"><span><span style="color:#a0a000">
</span></span></span><span style="display:flex;"><span><span style="color:#a0a000">        default:</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a2f;font-weight:bold">return</span> <span style="color:#a2f;font-weight:bold">false</span><span style="color:#666">;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#666">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#666">}</span>
</span></span></code></pre></div>
    </p>
    
    

<hr>
<h3>See Also</h3>
<ul>
  
  <li><a href="/blog/update-widget/">Update App Widget</a></li>
  
  <li><a href="/blog/create-word-grid/">Create a Word Grid</a></li>
  
  <li><a href="/blog/android-flutter/">Android Flutter</a></li>
  
  <li><a href="/blog/android-kotlin/">Android Kotlin</a></li>
  
  <li><a href="/blog/word-count/">Android Word Count</a></li>
  
</ul>


      <hr>
  </div>

  


        </div>
          <div class="medium-3 columns" data-sticky-container>
  <div class="sticky" data-sticky data-anchor="content">

  

  

  <h4>Recent Posts</h4>
  <ul>
    
      <li><a href="/blog/android-navigation-menu/">
        Android Navigation Menu
      </a></li>
    
      <li><a href="/blog/update-widget/">
        Update App Widget
      </a></li>
    
      <li><a href="/blog/turkey-cabbage-wraps/">
        Turkey Cabbage Wraps
      </a></li>
    
      <li><a href="/blog/create-word-grid/">
        Create a Word Grid
      </a></li>
    
      <li><a href="/blog/read-paywalled-articles/">
        Read Paywalled Newspaper Articles
      </a></li>
    
      <li><a href="/blog/risotto-milanese/">
        Risotto Milanese
      </a></li>
    
      <li><a href="/blog/android-flutter/">
        Android Flutter
      </a></li>
    
      <li><a href="/blog/android-kotlin/">
        Android Kotlin
      </a></li>
    
      <li><a href="/blog/word-count/">
        Android Word Count
      </a></li>
    
      <li><a href="/blog/pea-and-ham-soup/">
        Pea and Ham (or Bacon) Soup
      </a></li>
    
  </ul>

  
    <h4>Links</h4>
    <ul>
      
        <li><a href="https://github.com/billthefarmer">
          Github
        </a></li>
      
        <li><a href="https://gitlab.com/williamjfarmer">
          Gitlab
        </a></li>
      
        <li><a href="http://billthefarmer.github.io">
          Home
        </a></li>
      
    </ul>
  

  </div>
</div>

      </div>
    </main>

    <footer class="blog-footer">
      <div class="row column">
        <p>
          
          Copyright © 2023 Bill Farmer
          
        </p>
        <p>
          <a href="https://billthefarmer.github.io/blog/android-navigation-menu/#">Back to top</a>
        </p>
      </div>
    </footer>

  <foot>

    <script src="https://billthefarmer.github.io/blog/js/app.js"></script>

  </foot>
  </body>
</html>
